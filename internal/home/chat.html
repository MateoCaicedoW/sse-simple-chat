<h2 class="text-xl font-bold">Random</h2>
<div class="h-[calc(100svh_-_210px)] overflow-auto mt-4 ">
    <div id="chat" class="flex flex-col gap-2" hx-ext="sse" sse-connect="/chat" sse-swap="chat" hx-swap="beforeend">

    </div>
</div>
<div class="mt-5">
    <form hx-post="/message" hx-swap="none" _="on htmx:afterRequest set #message's value to ''" class="flex items-center gap-2">
        <input autofocus id="message" type="text" name="message" class="w-full border p-2 rounded-lg focus:ring-black focus:border-0 focus:ring-2" placeholder="Type your message here..." />
        <div id="visualizer-container" class="hidden w-full h-[42px] bg-gray-200 rounded-lg overflow-hidden">
            <canvas id="visualizer" class="w-full h-full"></canvas>
        </div>
        <button type="button" id="recordButton" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mic"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
        </button>
        <button type="button" id="stopButton" class="hidden bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-pause"><circle cx="12" cy="12" r="10"/><line x1="10" x2="10" y1="15" y2="9"/><line x1="14" x2="14" y1="15" y2="9"/></svg>
        </button>
        
        <button type="submit" class="bg-gray-800 text-white p-2 rounded-lg">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" />
            </svg>                              
        </button>
    </form>
</div>


<script type="module">
    import Record from '<%= assetPath(`/public/record_audio.js`) %>';
    Record()
</script>